<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Make a Sitemap with Sveltekit</title><link rel="icon" href="/VENS/favicon.png" data-svelte="svelte-a389yn"><meta name="description" content="If you want to rank on Google (and other search engines) you need to\nbe able to tell the world what your site consists of. A sitemap is\nused by the Googlebot, BingBot, DuckDuckBot and other search engines\nto tell them what pages are available." data-svelte="svelte-og4ek2"><meta name="author" content="Ven Studios" data-svelte="svelte-og4ek2"><meta property="og:url" content="https://yourdomain.com/make-a-sitemap-with-sveltekit" data-svelte="svelte-og4ek2"><meta property="og:type" content="website" data-svelte="svelte-og4ek2"><meta property="og:title" content="Make a Sitemap with Sveltekit" data-svelte="svelte-og4ek2"><meta property="og:description" content="If you want to rank on Google (and other search engines) you need to\nbe able to tell the world what your site consists of. A sitemap is\nused by the Googlebot, BingBot, DuckDuckBot and other search engines\nto tell them what pages are available." data-svelte="svelte-og4ek2"><meta property="og:image" content="https://og-image.vercel.app/**Make%20a%20Sitemap%20with%20Sveltekit**?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fhyper-color-logo.svg" data-svelte="svelte-og4ek2"><meta name="twitter:card" content="summary_large_image" data-svelte="svelte-og4ek2"><meta property="twitter:domain" content="https://yourdomain.com" data-svelte="svelte-og4ek2"><meta property="twitter:url" content="https://yourdomain.com/make-a-sitemap-with-sveltekit" data-svelte="svelte-og4ek2"><meta name="twitter:title" content="Make a Sitemap with Sveltekit" data-svelte="svelte-og4ek2"><meta name="twitter:description" content="If you want to rank on Google (and other search engines) you need to\nbe able to tell the world what your site consists of. A sitemap is\nused by the Googlebot, BingBot, DuckDuckBot and other search engines\nto tell them what pages are available." data-svelte="svelte-og4ek2"><meta name="twitter:image" content="https://og-image.vercel.app/**Make%20a%20Sitemap%20with%20Sveltekit**?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fhyper-color-logo.svg" data-svelte="svelte-og4ek2">

		

		<link rel="modulepreload" href="/VENS/app/start-c116a043.js">
		<link rel="modulepreload" href="/VENS/app/chunks/vendor-2ff90f39.js">
		<link rel="modulepreload" href="/VENS/app/chunks/paths-28a87002.js">
		<link rel="modulepreload" href="/VENS/app/pages/__layout.svelte-f141b784.js">
		<link rel="modulepreload" href="/VENS/app/chunks/info-844534dd.js">
		<link rel="modulepreload" href="/VENS/app/pages/posts/[slug].svelte-77099382.js">
		<link rel="modulepreload" href="/VENS/app/chunks/get-posts-e96e0dff.js">
		<link rel="stylesheet" href="/VENS/app/assets/start-d977ffc4.css">
		<link rel="stylesheet" href="/VENS/app/assets/pages/__layout.svelte-09a93f09.css">

		<script type="module">
			import { start } from "/VENS/app/start-c116a043.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"/VENS","assets":""},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/VENS/app/pages/__layout.svelte-f141b784.js"),
						import("/VENS/app/pages/posts/[slug].svelte-77099382.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "\u002Fposts\u002Fmake-a-sitemap-with-sveltekit",
						query: new URLSearchParams(""),
						params: {slug:"make-a-sitemap-with-sveltekit"}
					}
				}
			});
		</script>
  </head>
  <body class="transition-colors duration-100 bg-gray-100 dark:bg-gray-900">
    <div id="svelte">




<div class="flex flex-col min-h-screen"><div class="mx-auto flex flex-col md:flex-row flex-grow w-full"><div class="flex h-16 px-4 py-2 justify-between items-center md:hidden"><h1 class="text-2xl font-bold text-gray-800 dark:text-white"><a href="/VENS/">Ven Studios</a></h1>
  <div class="flex h-16 px-4 py-2 justify-between items-center"><h1 class="text-md px-4 font-bold text-gray-800 dark:text-white"><a href="/VENS/about">About</a>
      </h1><h1 class="text-md px-4 font-bold text-gray-800 dark:text-white"><a href="/VENS/projects">Projects</a>
      </h1></div></div>

<div class="px-4 py-2 items-center hidden flex-col bg-black justify-start md:flex"><h1 class="text-2xl font-bold text-gray-800 dark:text-white flex flex-nowrap"><a div class="whitespace-nowrap" href="/VENS/">Ven Studios</a></h1>
  <div class="flex flex-col h-16 pt-6 justify-between w-full"><h1 class="text-md font-bold text-gray-800 dark:text-white"><a href="/VENS/about">About</a>
      </h1><h1 class="text-md font-bold text-gray-800 dark:text-white"><a href="/VENS/projects">Projects</a>
      </h1></div></div>
    <main class="flex flex-col w-full flex-grow prose prose-sm sm:prose lg:prose-lg dark:prose-dark">

<article><h1 class="!mt-0 !mb-1">Make a Sitemap with Sveltekit</h1>
  <div><time datetime="2021-08-20T04:00:00.000Z">August 20, 2021</time>
    •
    <span>6 min read</span></div>
  <p>If you want to rank on Google (and other search engines) you need to
be able to tell the world what your site consists of. A sitemap is
used by the Googlebot, BingBot, DuckDuckBot and other search engines
to tell them what pages are available.</p>
<p>ℹ️ This is a contribution post from <a href="https://scottspence.com/posts/make-a-sitemap-with-sveltekit/" rel="nofollow">scottspence.com</a></p>
<p>This guide will take a lot of the learnings from the post I wrote on
<a href="https://scottspence.com/posts/make-an-rss-feed-with-sveltekit" rel="nofollow">Making an RSS Feed for your SvelteKit Project</a> and expand on it for
use as a sitemap.</p>
<p>So as with the RSS post I’ll be using Matt Jennings’ awesome
<a href="https://github.com/mattjennings/sveltekit-blog-template" rel="nofollow">SvelteKit blog template</a> for this example.</p>
<p>If you haven’t seen the last guide that’s fine I’ll include a lot of
the steps in here so there’s no need to cross reference.</p>
<h2 id="sitemap-route"><a href="#sitemap-route">Sitemap route</a></h2>
<p>If you haven’t done so already and want to follow along then clone the
repo and install the dependencies and spin up the dev server, the
default port is <code>3000</code>:</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash"><span class="token comment"># using SSH</span>
<span class="token function">git</span> clone git@github.com:mattjennings/sveltekit-blog-template
<span class="token comment"># using HTTPS</span>
<span class="token function">git</span> clone https://github.com/mattjennings/sveltekit-blog-template
<span class="token builtin class-name">cd</span> sveltekit-blog-template
<span class="token function">npm</span> i
<span class="token function">npm</span> run dev</code><!-- HTML_TAG_END --></pre>
<p>If I open up Matt’s SvelteKit blog template in VS Code this is how it
is structured:</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash">sveltekit-blog-template/
├─ posts/
│ └─ getting-started/
│   └─ index.md
├─ src/
│ └─ lib/
│ └─ routes/
│ │ └─ posts/
│ │   └─ <span class="token punctuation">[</span>slug<span class="token punctuation">]</span>.svelte/
│ │─ __layout.svelte/
│ └─ index.svelte/
<span class="token punctuation">..</span>.rest of the files</code><!-- HTML_TAG_END --></pre>
<p>Currently it’s an index page and a posts directory, the index page is
the site homepage and the posts directory will take a slug that’s
passed to the <code>[slug].svelte</code> file (example <code>getting-started</code>) and
turn that into <code>localhost:3000/posts/getting-started</code>.</p>
<p>A sitemap is generally located at the root level of a site, so in the
case of my site it’s <code>https://scottspence.com/sitemap.xml</code>.</p>
<p>I’ll create the sitemap file as <code>sitemap.xml.js</code> in <a href="https://kit.svelte.dev/docs#routing-endpoints" rel="nofollow">SvelteKit
endpoints</a> you can define the type of data you want to return, in this
case it’s XML.</p>
<p>I’ll create the sitemap file via the terminal:</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash"><span class="token function">touch</span> src/routes/sitemap.xml.js</code><!-- HTML_TAG_END --></pre>
<p>If I go to <code>localhost:3000/sitemap.xml</code> I get a 404.</p>
<p>Now I need to create a <code>get()</code> function to return the sitemap XML and
headers for the endpoint.</p>
<p>For now I’ll put in some XML headings for the body, I’ll move the XML
out into it’s own function later, for now this is just to get a bit of
visual feedback:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">'max-age=0, s-maxage=3600'</span><span class="token punctuation">,</span>
    <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/xml'</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    headers<span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;?xml version="1.0" encoding="UTF-8" ?>
    &lt;urlset
      xmlns="https://www.sitemaps.org/schemas/sitemap/0.9"
      xmlns:news="https://www.google.com/schemas/sitemap-news/0.9"
      xmlns:xhtml="https://www.w3.org/1999/xhtml"
      xmlns:mobile="https://www.google.com/schemas/sitemap-mobile/1.0"
      xmlns:image="https://www.google.com/schemas/sitemap-image/1.1"
      xmlns:video="https://www.google.com/schemas/sitemap-video/1.1"
    >&lt;/urlset></span><span class="token template-punctuation string">&#96;</span></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<p>Going to <code>localhost:3000/sitemap.xml</code> now a get the beginnings of my
sitemap XML feed.</p>
<p>In the <code>headers</code> I’m setting the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control#expiration" rel="nofollow">expiration</a> to an hour with
<code>s-maxage</code> and for the <code>body</code> adding in the XML heading. You can check
out the <a href="https://validator.w3.org/feed/docs/rss2.html" rel="nofollow">W3C Feed Validation Service</a> for more detail on what’s needed
here.</p>
<p>The schemas (<code>xmlns:news</code> etc) are used to tell the search engines
what type of data you’re returning. I’ve used <a href="https://www.joshwcomeau.com/sitemap.xml" rel="nofollow">Josh Comeau’s sitemap</a>
as an example here. You can check out Sitemaps XML format over on
<a href="https://www.sitemaps.org/protocol.html" rel="nofollow">sitemaps.org</a> for more information.</p>
<p>Now if I go check <code>localhost:3000/rss.xml</code> I get the beginning of my
RSS feed.</p>
<h2 id="hardcoding-pages-into-the-sitemap"><a href="#hardcoding-pages-into-the-sitemap">Hardcoding pages into the sitemap</a></h2>
<p>First up I’ll tackle the first url which isn’t going to change, the
site URL.</p>
<p>In Matt’s template there’s an <code>info.js</code> file that contains the project
<code>name</code> and <code>website</code> links. I’ll import the <code>website</code> and use that.</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> website <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/info'</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">'max-age=0, s-maxage=3600'</span><span class="token punctuation">,</span>
    <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/xml'</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    headers<span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;?xml version="1.0" encoding="UTF-8" ?>
    &lt;urlset
      xmlns="https://www.sitemaps.org/schemas/sitemap/0.9"
      xmlns:news="https://www.google.com/schemas/sitemap-news/0.9"
      xmlns:xhtml="https://www.w3.org/1999/xhtml"
      xmlns:mobile="https://www.google.com/schemas/sitemap-mobile/1.0"
      xmlns:image="https://www.google.com/schemas/sitemap-image/1.1"
      xmlns:video="https://www.google.com/schemas/sitemap-video/1.1"
    >
      &lt;url>
        &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
        &lt;changefreq>daily&lt;/changefreq>
        &lt;priority>0.7&lt;/priority>
      &lt;/url>
    &lt;/urlset></span><span class="token template-punctuation string">&#96;</span></span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<p>That was straightforward enough, right? That’s only one page though so
the Googlebot isn’t going to be doing much with that.</p>
<h2 id="adding-posts-to-sitemap"><a href="#adding-posts-to-sitemap">Adding posts to sitemap</a></h2>
<p>Because the posts routes are dynamically generated I’ll need to create
a little helper function for the posts, I’ll use a trimmed down
version of what Matt uses in the homepage (<code>src/routes/index.js</code>) to
get the posts.</p>
<p>I’ll create a <code>get-posts.js</code> in the <code>lib</code> directory of the project:</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash"><span class="token comment"># create the file</span>
<span class="token function">touch</span> src/lib/get-posts.js</code><!-- HTML_TAG_END --></pre>
<p>Here’s what the function for <code>getPosts</code> looks like:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token keyword">await</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">'/posts/**/*.md'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// get post metadata</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">,</span> post<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> post<span class="token punctuation">.</span>metadata<span class="token punctuation">)</span>
    <span class="token comment">// sort by date</span>
    <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>date <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>date <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> posts
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<p>I can now import that into the <code>sitemap.xml.js</code> file so I can map over
the posts returned from the <code>getPosts</code> function inside the XML markup
using tags <code>${}</code>.</p>
<p>Before I do that though I’ll move the markup out into a function so
it’s not cluttering up the return of the <code>get()</code> function.</p>
<p>I can pass the <code>posts</code> from the <code>getPosts()</code> function into this, then
I can map over each post and render out the markup for each one:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">sitemap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">posts</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;?xml version="1.0" encoding="UTF-8" ?>
&lt;urlset
  xmlns="https://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:news="https://www.google.com/schemas/sitemap-news/0.9"
  xmlns:xhtml="https://www.w3.org/1999/xhtml"
  xmlns:mobile="https://www.google.com/schemas/sitemap-mobile/1.0"
  xmlns:image="https://www.google.com/schemas/sitemap-image/1.1"
  xmlns:video="https://www.google.com/schemas/sitemap-video/1.1"
>
  &lt;url>
    &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
    &lt;changefreq>daily&lt;/changefreq>
    &lt;priority>0.7&lt;/priority>
  &lt;/url>
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>posts
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      post<span class="token punctuation">.</span>isPrivate
        <span class="token operator">?</span> <span class="token keyword">null</span>
        <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
  &lt;url>
    &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/posts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
    &lt;changefreq>daily&lt;/changefreq>
    &lt;priority>0.7&lt;/priority>
  &lt;/url>
  </span><span class="token template-punctuation string">&#96;</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
&lt;/urlset></span><span class="token template-punctuation string">&#96;</span></span></code><!-- HTML_TAG_END --></pre>
<p>Now in the get function I’ll pass the <code>posts</code> from the <code>getPosts()</code>
into the <code>sitemap</code> function and use that for the body return of
<code>getPosts()</code>.</p>
<p>Here’s the full file:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getPosts <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/get-posts'</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> website <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/info'</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token function">sitemap</span><span class="token punctuation">(</span>posts<span class="token punctuation">)</span>

  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">'max-age=0, s-maxage=3600'</span><span class="token punctuation">,</span>
    <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/xml'</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    headers<span class="token punctuation">,</span>
    body
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> <span class="token function-variable function">sitemap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">posts</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;?xml version="1.0" encoding="UTF-8" ?>
&lt;urlset
  xmlns="https://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:news="https://www.google.com/schemas/sitemap-news/0.9"
  xmlns:xhtml="https://www.w3.org/1999/xhtml"
  xmlns:mobile="https://www.google.com/schemas/sitemap-mobile/1.0"
  xmlns:image="https://www.google.com/schemas/sitemap-image/1.1"
  xmlns:video="https://www.google.com/schemas/sitemap-video/1.1"
>
  &lt;url>
    &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
    &lt;changefreq>daily&lt;/changefreq>
    &lt;priority>0.7&lt;/priority>
  &lt;/url>
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>posts
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      post<span class="token punctuation">.</span>isPrivate
        <span class="token operator">?</span> <span class="token keyword">null</span>
        <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
  &lt;url>
    &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/posts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
    &lt;changefreq>daily&lt;/changefreq>
    &lt;priority>0.7&lt;/priority>
  &lt;/url>
  </span><span class="token template-punctuation string">&#96;</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
&lt;/urlset></span><span class="token template-punctuation string">&#96;</span></span></code><!-- HTML_TAG_END --></pre>
<h2 id="next-steps-from-here"><a href="#next-steps-from-here">Next steps from here</a></h2>
<p>There’s some aspects of this project that wont change very often, like
the routes for the homepage, about page etc. I could hardcode these
into the XML directly.</p>
<p>But rather than doing that I can add the pages to an array variable so
that I can add any new pages that exist in the <code>src/routes</code> to it.</p>
<p>I can add any new pages to the array rather than creating a new
<code>&lt;url&gt;</code> element for each new page that’s added. Here’s an example of
how that may look:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getPosts <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/get-posts'</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> website <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$lib/info'</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">about</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">newsletter</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">privacy-policy</span><span class="token template-punctuation string">&#96;</span></span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token function">sitemap</span><span class="token punctuation">(</span>posts<span class="token punctuation">,</span> pages<span class="token punctuation">)</span>

  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string">'Cache-Control'</span><span class="token operator">:</span> <span class="token string">'max-age=0, s-maxage=3600'</span><span class="token punctuation">,</span>
    <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/xml'</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    headers<span class="token punctuation">,</span>
    body
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> <span class="token function-variable function">sitemap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">posts<span class="token punctuation">,</span> pages</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">&lt;?xml version="1.0" encoding="UTF-8" ?>
&lt;urlset
  xmlns="https://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:news="https://www.google.com/schemas/sitemap-news/0.9"
  xmlns:xhtml="https://www.w3.org/1999/xhtml"
  xmlns:mobile="https://www.google.com/schemas/sitemap-mobile/1.0"
  xmlns:image="https://www.google.com/schemas/sitemap-image/1.1"
  xmlns:video="https://www.google.com/schemas/sitemap-video/1.1"
>
  &lt;url>
    &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
    &lt;changefreq>daily&lt;/changefreq>
    &lt;priority>0.7&lt;/priority>
  &lt;/url>
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>pages
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
  &lt;url>
    &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>page<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
    &lt;changefreq>daily&lt;/changefreq>
    &lt;priority>0.7&lt;/priority>
  &lt;/url>
  </span><span class="token template-punctuation string">&#96;</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>posts
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      post<span class="token punctuation">.</span>isPrivate
        <span class="token operator">?</span> <span class="token keyword">null</span>
        <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">
  &lt;url>
    &lt;loc></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>website<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/posts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>post<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/loc>
    &lt;changefreq>daily&lt;/changefreq>
    &lt;priority>0.7&lt;/priority>
  &lt;/url>
  </span><span class="token template-punctuation string">&#96;</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">
&lt;/urlset></span><span class="token template-punctuation string">&#96;</span></span></code><!-- HTML_TAG_END --></pre>
<h2 id="conclusion"><a href="#conclusion">Conclusion</a></h2>
<p>Alright, I’ve gone through and created a sitemap that contains all the
pages on the project.</p>
<p>I hope this has given you enough information to get started with
making your own sitemap on your SvelteKit projects.</p>
</article>

<div class="pt-12 flex justify-between"><a href="/VENS/posts/make-an-rss-feed-with-sveltekit" class="block px-3 py-1 !text-gray-800 dark:!text-gray-300 dark:!text-opacity-90 bg-gray-300 dark:bg-gray-800 rounded-md !no-underline"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
    <span>Make an RSS Feed for your SvelteKit Project</span>
    </div></a>
  <a href="/VENS/posts/getting-started" class="block px-3 py-1 !text-gray-800 dark:!text-gray-300 dark:!text-opacity-90 bg-gray-300 dark:bg-gray-800 rounded-md !no-underline"><div class="flex items-center space-x-2">
    <span>Getting Started</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></div></a></div></main></div></div>



			
		</div>

    <!-- this fixes a bug in chrome where animations trigger from unstyled to styled content on page load -->
    <!-- https://stackoverflow.com/a/42969257/6342734 -->
    <!-- prettier-ignore -->
    <script> </script>
  </body>
</html>
